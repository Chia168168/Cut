<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>網頁圖片裁切工具</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css">
</head>
<body>
    <h1>網頁圖片裁切工具</h1>
    <input type="file" id="imageInput" accept="image/jpeg,image/png,image/heic,image/heif">
    <button onclick="cropImage()">裁切圖片</button>
    <div>
        <img id="image" style="max-width: 100%;">
    </div>
    <h2>裁切結果</h2>
    <canvas id="result"></canvas>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.js"></script>
    <script>
        let cropper;
        const input = document.getElementById('imageInput');
        const image = document.getElementById('image');

        input.addEventListener('change', (event) => {
            const file = event.target.files[0];
            if (file) {
                const url = URL.createObjectURL(file);
                image.src = url;
                if (cropper) cropper.destroy();
                cropper = new Cropper(image, {
                    aspectRatio: 1,
                    viewMode: 1,
                });
            }
        });

        function cropImage() {
            if (cropper) {
                const canvas = cropper.getCroppedCanvas();
                document.getElementById('result').replaceWith(canvas);
            } else {
                alert('請先上傳圖片');
            }
        }
    </script>
</body>
</html>
